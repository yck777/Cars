<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" href="./layui/css/layui.css">
		<link rel="stylesheet" type="text/css" href="css/carDC.css"/>
		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/echarts.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/index.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<!-- header start -->
		<div class="layui-fluid">
			<div class="layui-row mgt10">
				<div class="layui-col-lg1">
					<ul class="layui-nav cdc-nav cdc-nav-left" lay-filter="">
					  <li class="layui-nav-item cdc-nav-li">
					    <a href="javascript:;" class="cdc-nav-li-a">导航菜单</a>
					    <dl class="layui-nav-child"> <!-- 二级菜单 -->
								<dd><a href="./index.html">首页</a></dd>
								<dd><a href="./carManage.html">车辆管理</a></dd>
								<dd><a href="./carUse.html">用车记录</a></dd>
								<dd><a href="./carRepair.html">维修管理</a></dd>
								<dd><a href="./driverManage.html">司机管理</a></dd>
					    </dl>
					  </li>
					</ul>
				</div>
				<div class="layui-col-lg10">
					<div class="cdc-nav-md">
						<ul class="cdc-nav-left-skewY">
							<li></li>
							<li></li>
							<li></li>
							<li></li>
						</ul>
						<div class="sort-hr-left">
							
						</div>
						<div class="cdc-time">
							2021年10月10日 10:10:10
						</div>
						<div class="cdc-title">
							用车记录
						</div>
						<div class="sort-hr-right">
							
						</div>
						<ul class="cdc-nav-right-skewY">
							<li></li>
							<li></li>
							<li></li>
							<li></li>
						</ul>
					</div>
				</div>
				<div class="layui-col-lg1">
					<ul class="layui-nav cdc-nav cdc-nav-right" lay-filter="">
					  <li class="layui-nav-item cdc-nav-li">
					    <a href="javascript:;" class="cdc-nav-li-a">账号管理</a>
					    <dl class="layui-nav-child"> <!-- 二级菜单 -->
					      <dd><a href="">修改密码</a></dd>
					      <dd><a href="">管理记录</a></dd>
					      <dd><a href="">退出登录</a></dd>
					    </dl>
					  </li>
					</ul>
				</div>
			</div>
		</div>
		<!-- header end -->
		<div class="layui-fluid">
			<div class="layui-row mgt20 layui-col-space10">
				<div class="layui-col-lg3">
					
					<div class="cdc-box1" style="height: 27vh;">
						<div class="left-hr"></div>
						<div class="right-hr"></div>
						<div class="top-hr"></div>
						<div class="bottom-hr"></div>
						<div class="top-hr-b"></div>
						<div class="bottom-hr-b1"></div>
						<div class="bottom-hr-b2"></div>
						<div class="box1-title">
							当前车辆状态
						</div>
						<div class="box1-content">
							<div id="carStatus" style="height: 26vh;">
								
							</div>
						</div>
					</div>
					<div class="cdc-box1 mgt20" style="height: 27vh;">
						<div class="left-hr"></div>
						<div class="right-hr"></div>
						<div class="top-hr" style="width:60%"></div>
						<div class="bottom-hr"></div>
						<div class="top-hr-b" style="left: 140px;"></div>
						<div class="bottom-hr-b1"></div>
						<div class="bottom-hr-b2"></div>
						<div class="box1-title" style="width: 140px;">
							出行范围统计
						</div>
						<div class="box1-content">
							<div id="outType" style="height: 26vh;">
								
							</div>
						</div>
						
					</div>
					<div class="cdc-box1 mgt20" style="height: 34vh;">
						<div class="left-hr"></div>
						<div class="right-hr"></div>
						<div class="top-hr" style="width:60%"></div>
						<div class="bottom-hr"></div>
						<div class="top-hr-b" style="left: 140px;"></div>
						<div class="bottom-hr-b1"></div>
						<div class="bottom-hr-b2"></div>
						<div class="box1-title" style="width: 140px;">
							申请量趋势
						</div>
						<div class="layui-tab cdc-tab" lay-filter="applyTrend">
						  <ul class="layui-tab-title fixedRt">
						    <li class="layui-this">每日</li>
						    <li>每月</li>
						  </ul>
						  <div class="layui-tab-content">
						    <div class="layui-tab-item layui-show">
									<div class="box1-content">
										<div id="applyTrendD" style="height: 30vh;">
											
										</div>
									</div>
								</div>
						    <div class="layui-tab-item">
									<div class="box1-content">
										<div id="applyTrendM" style="height: 30vh;">
											
										</div>
									</div>
								</div>
						  </div>
						</div>
						
						
					</div>
					
				</div>
				<div class="layui-col-lg6">
					<div class="layui-row">
						<div class="layui-row">
							<div class="layui-col-lg3">
								<div class="cdc-numBox2">
									<h4>今日申请数</h4>
									<p>33</p>
								</div>
							</div>
							<div class="layui-col-lg6">
								<div class="cdc-numBox2">
									<h2>用车申请总数</h2>
									<ul id="cont1" class=""></ul>
								</div>
							</div>
							<div class="layui-col-lg3">
								<div class="cdc-numBox2">
									<h4>当月申请总数</h4>
									<p>980</p>
								</div>
							</div>							
						</div>						
						<div class="cdc-box2 mgt50">							
							<div class="box2-ss">
								<div class="box2-title">
									车辆管理
								</div>
								<form class="layui-form cdc-form" action="">
								  <div class="layui-form-item layui-row">
										<div class="layui-inline  layui-col-lg4 layui-col-md4">
											<label class="layui-form-label">车牌号</label>
											<div class="layui-input-inline">
												<input type="text" name="title" required  lay-verify="required" placeholder="请输入车牌号" autocomplete="off" class="layui-input">
											</div>
										</div>
										<div class="layui-inline layui-col-lg4 layui-col-md4">
											<label class="layui-form-label">申请人</label>
											<div class="layui-input-inline">
												<input type="text" name="user" required  lay-verify="required" placeholder="请输入申请人姓名" autocomplete="off" class="layui-input">
											</div>
										</div>
										<div class="layui-inline layui-col-lg4 layui-col-md4">
										  <button class="layui-btn layui-btn-danger" lay-submit lay-filter="carSs">查找</button>
											<div class="layui-btn layui-btn-normal" id="moreBtn">高级搜索</div>
										</div>
								    
								  </div>
								</form>
							</div>
							<div class="box2-content" style="margin-top: 20px;">
								<table class="layui-hide" id="carlists"></table>
								<script type="text/html" id="carListsBar">
									<a class="layui-btn layui-btn-normal layui-btn-xs">查看</a>
									{{#  if(d.code ==1){ }}
								  <a class="layui-btn layui-btn-xs" lay-event="edit">派车</a>
									{{#  } }}
									{{#  if(d.code ==2){ }}
									<a class="layui-btn layui-btn-warm layui-btn-xs" lay-event="edit">修改</a>
									{{#  } }}
								  
								</script>
							</div>
						</div>
					</div>
				</div>
				<div class="layui-col-lg3">
					<div class="cdc-box1" style="height: 27.3vh;">
						<div class="left-hr"></div>
						<div class="right-hr"></div>
						<div class="top-hr" style="width:60%"></div>
						<div class="bottom-hr"></div>
						<div class="top-hr-b" style="left: 140px;"></div>
						<div class="bottom-hr-b1"></div>
						<div class="bottom-hr-b2"></div>
						<div class="box1-title" style="width: 140px;">
							审批及时率
						</div>
						<div class="box1-content">
							<div id="applyTime" style="height: 26vh;">
								
							</div>
						</div>
						
					</div>
					<div class="cdc-box1 mgt20" style="height: 30.4vh;">
						<div class="left-hr"></div>
						<div class="right-hr"></div>
						<div class="top-hr" style="width:60%"></div>
						<div class="bottom-hr"></div>
						<div class="top-hr-b" style="left: 140px;"></div>
						<div class="bottom-hr-b1"></div>
						<div class="bottom-hr-b2"></div>
						<div class="box1-title" style="width: 140px;">
							还车及时率
						</div>
						<div class="box1-content">
							<div id="carBack" style="height: 28vh;">
								
							</div>
						</div>
						
					</div>
					<div class="cdc-box1 mgt20" style="height: 30.3vh;">
						<div class="left-hr"></div>
						<div class="right-hr"></div>
						<div class="top-hr" style="width:60%"></div>
						<div class="bottom-hr"></div>
						<div class="top-hr-b" style="left: 140px;"></div>
						<div class="bottom-hr-b1"></div>
						<div class="bottom-hr-b2"></div>
						<div class="box1-title" style="width: 140px;">
							用车满意度统计
						</div>
						<div class="box1-content">
							<div id="evaluate" style="height: 28vh;">
								
							</div>
						</div>
						
					</div>
				</div>
			</div>
		</div>
		<div class="moreSearchBox" id="moreSearch" style="display: none;">
			<form class="layui-form cdc-form" action="">
			  <div class="layui-form-item">
					<div class="layui-inline">
						<label class="layui-form-label">车牌号</label>
						<div class="layui-input-inline">
							<input type="text" name="title" required  lay-verify="required" placeholder="请输入车牌号" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-inline">
						<label class="layui-form-label">申请人</label>
						<div class="layui-input-inline">
							<input type="text" name="user" required  lay-verify="required" placeholder="请输入申请人姓名" autocomplete="off" class="layui-input">
						</div>
					</div>
					
					<div class="layui-inline">
						<label class="layui-form-label">驾驶人</label>
						<div class="layui-input-inline">
							<input type="text" name="driver" required  lay-verify="required" placeholder="请输入驾驶人姓名" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-inline">
						<label class="layui-form-label">审批人</label>
						<div class="layui-input-inline">
							<input type="text" name="approve" required  lay-verify="required" placeholder="请输入审批人姓名" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-inline">
						<label class="layui-form-label">申请时间</label>
						<div class="layui-input-inline">
							<input type="text" name="date1" id="date1" autocomplete="off" class="layui-input" placeholder="起">
						</div>
						<div class="layui-inline">-</div>
						<div class="layui-input-inline">
							<input type="text" name="date2" id="date2" autocomplete="off" class="layui-input" placeholder="止">
						</div>
					</div>
					<div class="layui-inline">
						<label class="layui-form-label">审批状态</label>
						<div class="layui-input-inline">
							<select name="city" lay-verify="required">
								<option value=""></option>
								<option value="0">北京</option>
								<option value="1">上海</option>
								<option value="2">广州</option>
								<option value="3">深圳</option>
								<option value="4">杭州</option>
							</select>
						</div>
					</div>
					<div class="layui-inline">
						<label class="layui-form-label">车辆状态</label>
						<div class="layui-input-inline">
							<select name="city" lay-verify="required">
								<option value=""></option>
								<option value="0">北京</option>
								<option value="1">上海</option>
								<option value="2">广州</option>
								<option value="3">深圳</option>
								<option value="4">杭州</option>
							</select>
						</div>
					</div>
					<div class="layui-inline">
						<label class="layui-form-label">用车范围</label>
						<div class="layui-input-inline">
							<select name="city" lay-verify="required">
								<option value=""></option>
								<option value="0">北京</option>
								<option value="1">上海</option>
								<option value="2">广州</option>
								<option value="3">深圳</option>
								<option value="4">杭州</option>
							</select>
						</div>
					</div>
					<div class="layui-inline">
						<label class="layui-form-label">申请部门</label>
						<div class="layui-input-inline">
							<select name="city" lay-verify="required">
								<option value=""></option>
								<option value="0">北京</option>
								<option value="1">上海</option>
								<option value="2">广州</option>
								<option value="3">深圳</option>
								<option value="4">杭州</option>
							</select>
						</div>
					</div>
			    <div class="layui-inline">
			      <button class="layui-btn layui-btn-danger" lay-submit lay-filter="carSs">查找</button>
			    </div>
			  </div>
			</form>
		</div>
	<script src="./layui/layui.js"></script>
	<script src="js/ringLightFun.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/bar2.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/pie.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/pie2.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/xbar.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/gauge.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/line.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/barlinear.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/funnel.js" type="text/javascript" charset="utf-8"></script>
	<script>
	layui.use(['layer', 'form','element','table','laydate'], function(){
	  var layer = layui.layer
	  ,form = layui.form
		,element = layui.element
		,table = layui.table
		,laydate = layui.laydate;
		
		//日期
		  laydate.render({
		    elem: '#date1'
		  });
		  laydate.render({
		    elem: '#date2'
		  });
	  //监听提交
		form.on('submit(carSs)', function(data){
			layer.msg(JSON.stringify(data.field));
			return false;
		});
		$("#moreBtn").on("click",function(){
			layer.open({
				type: 1,
				title:"高级搜索",
				skin: 'cdc-moreSs',
				area: ['1200px', 'auto'],
				content:$('#moreSearch')
			});
		})
		
		element.on('tab(applyTrend)', function(data){
			// 用车量统计 月
			if(data.index==1){
				var applyTrendMElm = document.getElementById('applyTrendM');
				var applyTrendM = Object.create(line);
				applyTrendM.createLine([{name:'',value:[120, 132, 101, 134, 90, 230, 210]}],applyTrendMElm,{color:['#febe13'],xAxisData:['1月', '2月', '3月', '4月', '5月', '6月', '7月']});
			}
			
		});
		//车辆列表
		table.render({
		    elem: '#carlists'
		    ,url:'./caruselist.json'
		    ,cellMinWidth: 80
				,page: true
				,limit:10
				,skin:'nob'
				,even:'true'
		    ,cols: [[
					{field:'carstr2',  title: '区域', width:60,style:'padding:6px 0'}
		      ,{field:'carNo',  title: '车牌号'}
		      ,{field:'carDept',  title: '申请部门'}
					,{field:'carstr3',  title: '申请人'}
		      ,{field:'date',title: '申请时间',width:150}
		      ,{field:'status',title: '审批状态'}
					,{field:'b1',title: '车辆状态'}
					,{fixed: 'right', title:'操作', toolbar: '#carListsBar', width:150}
		    ]]
		  });
	});
	</script>
	<script type="text/javascript">
		var num = 15600;
		var digits = num.toString().split('');
		var realDigits = digits.map(Number);
		var html = '';
		realDigits.forEach(function(e){
			html += '<li>'+e+'</li>';
		})
		$("#cont1").html(html);
		
		// 车辆状态统计
		var carStatusElm = document.getElementById('carStatus');
		var carStatus = Object.create(pie);
		carStatus.pieCreate([{name:'已出车',value:20},{name:'未出车',value:32} , {name:'已派遣',value:5}],carStatusElm,{color:['#2ca1ff','#00d868','#febe13','#0adbfa','#65e5dd','#7b2cff','#f071ff', '#85f67a']});
		// 出行范围统计
		var outElm= document.getElementById('outType');
		var outType = Object.create(ringLightFun);
		outType.createChrt([{
    name: '市内',
    value: 20
},{
    name: '市外',
    value: 10
},{
    name: '省外',
    value: 30
}],outElm,{name:'',width:300,height:140,radius:[55, 59],center:['50%', '55%']});

	// 用车量统计 日
		var applyTrendDElm = document.getElementById('applyTrendD');
		var applyTrendD = Object.create(line);
		applyTrendD.createLine([{name:'',value:[120, 132, 101, 134, 90, 230, 210]}],applyTrendDElm,{color:['#2ca1ff'],xAxisData:['11-1', '11-2', '11-3', '11-4', '11-5', '11-6', '11-7']});
		
		// 审批及时率
		var applyTimeElm = document.getElementById('applyTime');
		var applyTime = Object.create(funnel);
		applyTime.createFunnel([
		    {value: 10, name: '5分钟内'},
		    {value: 30, name: '10分钟内'},
		    {value: 20, name: '30分钟内'},
		    {value: 50, name: '1小时内'},
		    {value: 40, name: '1小时以上'},
		],applyTimeElm,{color:['#FE4444','#FFA611','#66DA38','#3FA1FF','#550000'],name:""});
		
		// 监控设备
		var carBackElm = document.getElementById('carBack');
		var carBack = Object.create(pie2);
		carBack.createPie2([{
		    name: '及时还车',
		    value: 142
		},{
		    name: '延迟还车',
		    value: 31
		},{
		    name: '严重超时',
		    value: 5
		}],carBackElm,{color:['#00ffff','#ffe000','#ff5b00','#ff3000','#409B5C','#006ced','#ffa800']});
		
		// 用车满意度
				var evaluateElm = document.getElementById('evaluate');
				var evaluate = Object.create(pie);
				evaluate.pieCreate([{name:'满意',value:20},{name:'不满意',value:32}],evaluateElm,{color:['#85f67a','#7b2cff','#f071ff', '#85f67a'],formatter:'{d}%'});
		
	</script>
	</body>
</html>
